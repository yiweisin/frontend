exports.id=501,exports.ids=[501],exports.modules={11251:(e,t,s)=>{Promise.resolve().then(s.bind(s,82003)),Promise.resolve().then(s.bind(s,18780))},12554:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o});var r=s(12907);let o=(0,r.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yiweisin/GitHub/frontend/src/context/AuthContext.tsx","AuthProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yiweisin/GitHub/frontend/src/context/AuthContext.tsx","useAuth")},17244:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},18780:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>l});var r=s(60687),o=s(43210),n=s(62185),i=s(16189);let a=(0,o.createContext)({user:null,login:async()=>{},register:async()=>{},logout:async()=>{},loading:!0}),l=({children:e})=>{let[t,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(!0),d=(0,i.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("user");e&&s(JSON.parse(e)),c(!1)},[]);let h=async e=>{try{let t=await (0,n.iD)(e);s(t),d.push("/")}catch(e){throw e}},u=async e=>{try{let t=await (0,n.kz)(e);s(t),d.push("/")}catch(e){throw e}},x=async()=>{await (0,n.ri)(),s(null),d.push("/login")};return(0,r.jsx)(a.Provider,{value:{user:t,login:h,register:u,logout:x,loading:l},children:e})},c=()=>(0,o.useContext)(a)},21956:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/yiweisin/GitHub/frontend/src/components/ProtectedLayout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/yiweisin/GitHub/frontend/src/components/ProtectedLayout.tsx","default")},26972:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},58107:(e,t,s)=>{Promise.resolve().then(s.bind(s,21956)),Promise.resolve().then(s.bind(s,12554))},61135:()=>{},62185:(e,t,s)=>{"use strict";s.d(t,{$L:()=>x,Lp:()=>h,Tw:()=>c,Y5:()=>u,ZI:()=>d,iD:()=>n,kz:()=>i,ri:()=>a,s5:()=>f,tK:()=>m,yW:()=>l});let r="http://localhost:5141/api";async function o(e,t={}){let s=JSON.parse(localStorage.getItem("user")||"{}");s.token?(console.log("Using token for request:",e),t.headers={...t.headers,Authorization:`Bearer ${s.token}`}):console.warn("No token found for request:",e);let r=await fetch(e,t);if(401===r.status)throw console.error("Unauthorized request:",e),localStorage.removeItem("user"),window.location.href="/login",Error("Unauthorized");return r}async function n(e){console.log("API login function called with:",e.username);try{let t=await fetch(`${r}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Login response status:",t.status),!t.ok){let e=await t.text();throw console.error("Login error response:",e),Error(e||"Login failed")}let s=await t.json();return console.log("Login successful, user data:",s),localStorage.setItem("user",JSON.stringify(s)),console.log("User saved to localStorage"),s}catch(e){throw console.error("API login error:",e),e}}async function i(e){let t=await fetch(`${r}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Registration failed");let s=await t.json();return localStorage.setItem("user",JSON.stringify(s)),s}async function a(){localStorage.removeItem("user")}async function l(){let e=await o(`${r}/stocks`);if(!e.ok)throw Error("Failed to fetch stocks");return e.json()}async function c(e){let t=await o(`${r}/stocks/${e}`);if(!t.ok)throw Error("Failed to fetch stock");return t.json()}async function d(){let e=await o(`${r}/stocks/prices`);if(!e.ok)throw Error("Failed to fetch stock prices");return e.json()}async function h(e){let t=await o(`${r}/stocks/${e}/history`);if(!t.ok)throw Error("Failed to fetch stock history");return t.json()}async function u(){let e=await o(`${r}/trades`);if(!e.ok)throw Error("Failed to fetch trades");return e.json()}async function x(e){let t=await o(`${r}/trades`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create trade");return t.json()}async function m(e,t){if(!(await o(`${r}/trades/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pnl:t,isHolding:!1})})).ok)throw Error("Failed to sell trade")}async function f(e){if(!(await o(`${r}/trades/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete trade")}},82003:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var r=s(60687),o=s(18780),n=s(43210),i=s(85814),a=s.n(i),l=s(16189);let c=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"9"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"5"}),(0,r.jsx)("rect",{x:"14",y:"12",width:"7",height:"9"}),(0,r.jsx)("rect",{x:"3",y:"16",width:"7",height:"5"})]}),d=()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),h=()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})}),u=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),x=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),(0,r.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,r.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]});function m(){let{user:e,logout:t}=(0,o.A)(),s=(0,l.usePathname)(),[i,m]=(0,n.useState)(!0),f=async()=>{await t()},p=[{path:"/",label:"Dashboard",icon:(0,r.jsx)(c,{})},{path:"/stocks",label:"Markets",icon:(0,r.jsx)(d,{})},{path:"/trades",label:"My Trades",icon:(0,r.jsx)(h,{})},{path:"/profile",label:"Profile",icon:(0,r.jsx)(u,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>m(!i),className:"fixed md:hidden z-90 bottom-10 right-10 bg-slate-700 w-12 h-12 rounded-full drop-shadow-lg flex justify-center items-center text-white hover:bg-slate-800 transition-colors",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsx)("div",{className:`${i?"translate-x-0":"-translate-x-full"} fixed top-0 left-0 h-screen w-72 bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-30 md:translate-x-0`,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 py-6 px-6",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"MONEYYY"}),(0,r.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:"A TRADING APP"})]}),e&&(0,r.jsx)("div",{className:"p-5 border-b border-slate-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-blue-600 text-white flex items-center justify-center text-lg font-bold shadow-sm",children:e.username.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-slate-800",children:e.username}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500 mr-2"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Active"})]})]})]})}),(0,r.jsxs)("nav",{className:"flex-grow py-6 px-3",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-4 mb-2",children:"Navigation"}),(0,r.jsx)("ul",{className:"space-y-1",children:p.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)(a(),{href:e.path,className:`flex items-center px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-100 hover:text-slate-800 transition-colors ${s===e.path?"bg-slate-100 text-slate-800 font-medium":""}`,children:[(0,r.jsx)("span",{className:`mr-3 ${s===e.path?"text-indigo-600":"text-slate-500"}`,children:e.icon}),(0,r.jsx)("span",{children:e.label}),s===e.path&&(0,r.jsx)("span",{className:"ml-auto h-2 w-2 rounded-full bg-indigo-600"})]})},e.path))})]}),e&&(0,r.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,r.jsxs)("button",{onClick:f,className:"flex items-center w-full px-4 py-3 rounded-lg text-slate-600 hover:bg-rose-50 hover:text-rose-600 transition-colors",children:[(0,r.jsx)("span",{className:"mr-3 text-slate-500",children:(0,r.jsx)(x,{})}),(0,r.jsx)("span",{children:"Sign Out"})]})})]})})]})}function f({children:e}){let{user:t,loading:s}=(0,o.A)();return s?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-700 font-medium",children:"Loading your dashboard..."})]})}):t?(0,r.jsxs)("div",{className:"flex min-h-screen bg-slate-50",children:[(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"flex-1 ml-0 md:ml-72 p-6 transition-all duration-300 ease-in-out",children:e})]}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50",children:e})}},94431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>l});var r=s(37413),o=s(7339),n=s.n(o);s(61135);var i=s(12554),a=s(21956);let l={title:"Trading App",description:"Track your stock trading history"};function c({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:n().className,children:(0,r.jsx)(i.AuthProvider,{children:(0,r.jsx)(a.default,{children:e})})})})}}};