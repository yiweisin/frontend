(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{12451:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(95155);function i(e){let{trade:t,onSell:s,onDelete:i}=e,a=t.isHolding&&t.currentPrice?(t.currentPrice-t.entryPrice)*100/100:t.pnl,n=a.toFixed(2),o=a>=0?"text-emerald-600":"text-rose-600",l=t.isHolding&&t.currentPrice?(t.currentPrice-t.entryPrice)/t.entryPrice*100:t.pnl/t.entryPrice*100,c=l.toFixed(2),d=l>=0?"+":"",x=async()=>{t.isHolding&&t.currentPrice&&await s(t.id,a)};return(0,r.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-medium text-slate-800",children:t.stockSymbol}),(0,r.jsx)("div",{className:"text-sm text-slate-500",children:t.stockName})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"font-medium text-slate-700",children:["$",t.entryPrice.toFixed(2)]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:t.isHolding&&t.currentPrice?(0,r.jsxs)("div",{className:"font-medium text-slate-800",children:["$",t.currentPrice.toFixed(2)]}):(0,r.jsx)("div",{className:"text-slate-400",children:"â€”"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"font-medium ".concat(o),children:[a>=0?"+":"",n,(0,r.jsxs)("span",{className:"text-xs ml-1",children:["(",d,c,"%)"]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-slate-600",children:new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t.isHolding?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"),children:t.isHolding?"Active":"Closed"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,r.jsx)("div",{className:"flex justify-center space-x-2",children:t.isHolding?(0,r.jsxs)("button",{onClick:x,className:"px-3 py-1.5 text-xs bg-slate-700 text-white rounded-md hover:bg-slate-800 transition-colors shadow-sm flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6"})}),"Sell"]}):(0,r.jsxs)("button",{onClick:()=>i(t.id),className:"px-3 py-1.5 text-xs bg-rose-500 text-white rounded-md hover:bg-rose-600 transition-colors shadow-sm flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[(0,r.jsx)("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),(0,r.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,r.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete"]})})})]})}s(12115)},22542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95155),i=s(12115),a=s(6874),n=s.n(a),o=s(25731),l=s(12451);function c(){let[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[x,h]=(0,i.useState)(0),[m,u]=(0,i.useState)("all"),p=(0,i.useCallback)(async()=>{try{a(!0),d(null);let[e,s]=await Promise.all([(0,o.Y5)(),(0,o.ZI)()]),r=e.map(e=>{if(e.isHolding){let t=s.find(t=>t.id===e.stockId);if(t)return{...e,currentPrice:t.price}}return e});t(r)}catch(e){d("Failed to fetch data"),console.error(e)}finally{a(!1)}},[]);(0,i.useEffect)(()=>{p()},[p]),(0,i.useEffect)(()=>{let e=setInterval(()=>{h(e=>e+1)},500);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{x>0&&(async()=>{try{let e=await (0,o.ZI)();t(t=>t.map(t=>{if(t.isHolding){let s=e.find(e=>e.id===t.stockId);if(s)return{...t,currentPrice:s.price}}return t}))}catch(e){console.error("Failed to update prices:",e)}})()},[x]);let g=async(e,t)=>{try{await (0,o.tK)(e,t),p()}catch(e){d("Failed to sell trade"),console.error(e)}},w=async e=>{try{await (0,o.s5)(e),p()}catch(e){d("Failed to delete trade"),console.error(e)}},f=e.filter(e=>"active"===m?e.isHolding:"closed"!==m||!e.isHolding),j=e.filter(e=>e.isHolding).length,y=e.filter(e=>!e.isHolding).length,v=e.reduce((e,t)=>t.isHolding&&t.currentPrice?e+(t.currentPrice-t.entryPrice):e+t.pnl,0);return s&&0===e.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-96 bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-700 font-medium",children:"Loading trades..."})]})}):c?(0,r.jsx)("div",{className:"max-w-7xl mx-auto my-8 px-6",children:(0,r.jsxs)("div",{className:"text-center py-8 px-4 bg-rose-50 text-rose-700 rounded-lg border border-rose-200",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-3 text-rose-500",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Trades"}),(0,r.jsx)("p",{children:c})]})}):(0,r.jsx)("div",{className:"max-w-7xl mx-auto my-8 px-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 px-8 py-6 text-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Trading History"}),(0,r.jsxs)("div",{className:"bg-slate-600/40 rounded-lg px-4 py-2 flex items-center",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full mr-2 ".concat(x>0?"bg-emerald-400 animate-pulse":"bg-slate-400")}),(0,r.jsx)("span",{className:"text-sm font-medium text-slate-200",children:x>0?"Live Updates":"Connecting..."})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-4 bg-indigo-400/20 rounded-lg p-3",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-indigo-300",children:[(0,r.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,r.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-slate-300 uppercase font-medium",children:"Active Positions"}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:j})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-4 bg-emerald-400/20 rounded-lg p-3",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:v>=0?"text-emerald-300":"text-rose-300",children:[(0,r.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),(0,r.jsx)("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),(0,r.jsx)("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-slate-300 uppercase font-medium",children:"Total P&L"}),(0,r.jsxs)("p",{className:"text-2xl font-bold mt-1 ".concat(v>=0?"text-emerald-400":"text-rose-400"),children:[v>=0?"+":"",v.toFixed(2)]})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-4 bg-blue-400/20 rounded-lg p-3",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-300",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,r.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,r.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-slate-300 uppercase font-medium",children:"Closed Trades"}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:y})]})]})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mt-8",children:[(0,r.jsxs)("div",{className:"flex bg-slate-600/40 rounded-lg overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>u("all"),className:"px-4 py-2 text-sm font-medium ".concat("all"===m?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-700/50"),children:"All Trades"}),(0,r.jsx)("button",{onClick:()=>u("active"),className:"px-4 py-2 text-sm font-medium ".concat("active"===m?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-700/50"),children:"Active"}),(0,r.jsx)("button",{onClick:()=>u("closed"),className:"px-4 py-2 text-sm font-medium ".concat("closed"===m?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-700/50"),children:"Closed"})]}),(0,r.jsxs)(n(),{href:"/stocks",className:"px-5 py-2 rounded-lg font-medium shadow-sm transition-all flex items-center bg-emerald-500 hover:bg-emerald-600 text-white",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:(0,r.jsx)("path",{d:"M12 5v14M5 12h14"})}),"Buy Stock"]})]})]}),(0,r.jsx)("div",{className:"p-6",children:0===f.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-4 text-slate-400",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M8 15h8M9 9h.01M15 9h.01"})]}),(0,r.jsx)("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No Trades Found"}),(0,r.jsx)("p",{className:"text-slate-500 max-w-md",children:"all"===m?"You haven't made any trades yet.":"active"===m?"You don't have any active positions.":"You don't have any closed trades yet."})]}):(0,r.jsx)("div",{className:"overflow-x-auto border border-slate-200 rounded-xl",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-slate-50",children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Entry Price"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Current Price"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"P&L"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:f.map(e=>(0,r.jsx)(l.A,{trade:e,onSell:g,onDelete:w},e.id))})]})})})]})})}},25731:(e,t,s)=>{"use strict";s.d(t,{$L:()=>m,Lp:()=>x,Tw:()=>c,Y5:()=>h,ZI:()=>d,iD:()=>a,kz:()=>n,ri:()=>o,s5:()=>p,tK:()=>u,yW:()=>l});let r="http://localhost:5141/api";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=JSON.parse(localStorage.getItem("user")||"{}");s.token?(console.log("Using token for request:",e),t.headers={...t.headers,Authorization:"Bearer ".concat(s.token)}):console.warn("No token found for request:",e);let r=await fetch(e,t);if(401===r.status)throw console.error("Unauthorized request:",e),localStorage.removeItem("user"),window.location.href="/login",Error("Unauthorized");return r}async function a(e){console.log("API login function called with:",e.username);try{let t=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Login response status:",t.status),!t.ok){let e=await t.text();throw console.error("Login error response:",e),Error(e||"Login failed")}let s=await t.json();return console.log("Login successful, user data:",s),localStorage.setItem("user",JSON.stringify(s)),console.log("User saved to localStorage"),s}catch(e){throw console.error("API login error:",e),e}}async function n(e){let t=await fetch("".concat(r,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Registration failed");let s=await t.json();return localStorage.setItem("user",JSON.stringify(s)),s}async function o(){localStorage.removeItem("user")}async function l(){let e=await i("".concat(r,"/stocks"));if(!e.ok)throw Error("Failed to fetch stocks");return e.json()}async function c(e){let t=await i("".concat(r,"/stocks/").concat(e));if(!t.ok)throw Error("Failed to fetch stock");return t.json()}async function d(){let e=await i("".concat(r,"/stocks/prices"));if(!e.ok)throw Error("Failed to fetch stock prices");return e.json()}async function x(e){let t=await i("".concat(r,"/stocks/").concat(e,"/history"));if(!t.ok)throw Error("Failed to fetch stock history");return t.json()}async function h(){let e=await i("".concat(r,"/trades"));if(!e.ok)throw Error("Failed to fetch trades");return e.json()}async function m(e){let t=await i("".concat(r,"/trades"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create trade");return t.json()}async function u(e,t){if(!(await i("".concat(r,"/trades/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pnl:t,isHolding:!1})})).ok)throw Error("Failed to sell trade")}async function p(e){if(!(await i("".concat(r,"/trades/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete trade")}},80878:(e,t,s)=>{Promise.resolve().then(s.bind(s,22542))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(80878)),_N_E=e.O()}]);