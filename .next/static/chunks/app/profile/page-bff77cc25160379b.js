(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{25731:(e,t,s)=>{"use strict";s.d(t,{$L:()=>u,Lp:()=>h,Tw:()=>c,Y5:()=>x,ZI:()=>d,iD:()=>n,kz:()=>o,ri:()=>l,s5:()=>f,tK:()=>m,yW:()=>i});let r="http://localhost:5141/api";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=JSON.parse(localStorage.getItem("user")||"{}");s.token?(console.log("Using token for request:",e),t.headers={...t.headers,Authorization:"Bearer ".concat(s.token)}):console.warn("No token found for request:",e);let r=await fetch(e,t);if(401===r.status)throw console.error("Unauthorized request:",e),localStorage.removeItem("user"),window.location.href="/login",Error("Unauthorized");return r}async function n(e){console.log("API login function called with:",e.username);try{let t=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Login response status:",t.status),!t.ok){let e=await t.text();throw console.error("Login error response:",e),Error(e||"Login failed")}let s=await t.json();return console.log("Login successful, user data:",s),localStorage.setItem("user",JSON.stringify(s)),console.log("User saved to localStorage"),s}catch(e){throw console.error("API login error:",e),e}}async function o(e){let t=await fetch("".concat(r,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Registration failed");let s=await t.json();return localStorage.setItem("user",JSON.stringify(s)),s}async function l(){localStorage.removeItem("user")}async function i(){let e=await a("".concat(r,"/stocks"));if(!e.ok)throw Error("Failed to fetch stocks");return e.json()}async function c(e){let t=await a("".concat(r,"/stocks/").concat(e));if(!t.ok)throw Error("Failed to fetch stock");return t.json()}async function d(){let e=await a("".concat(r,"/stocks/prices"));if(!e.ok)throw Error("Failed to fetch stock prices");return e.json()}async function h(e){let t=await a("".concat(r,"/stocks/").concat(e,"/history"));if(!t.ok)throw Error("Failed to fetch stock history");return t.json()}async function x(){let e=await a("".concat(r,"/trades"));if(!e.ok)throw Error("Failed to fetch trades");return e.json()}async function u(e){let t=await a("".concat(r,"/trades"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create trade");return t.json()}async function m(e,t){if(!(await a("".concat(r,"/trades/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pnl:t,isHolding:!1})})).ok)throw Error("Failed to sell trade")}async function f(e){if(!(await a("".concat(r,"/trades/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete trade")}},27422:(e,t,s)=>{Promise.resolve().then(s.bind(s,33246))},33246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95155),a=s(12115),n=s(35695),o=s(59576),l=s(25731);function i(){let{user:e,loading:t}=(0,o.A)(),s=(0,n.useRouter)(),[i,c]=(0,a.useState)({username:"",tradesCount:0,winRate:0,avgPnlPerTrade:0,totalPnL:0,bestTrade:0,worstTrade:0});return((0,a.useEffect)(()=>{t||e?e&&(async()=>{try{let t=await (0,l.Y5)(),s=t.length,r=t.filter(e=>e.pnl>0||e.isHolding&&e.currentPrice&&e.currentPrice>e.entryPrice),a=s>0?(r.length/s*100).toFixed(2):0,n=t.reduce((e,t)=>t.isHolding?t.currentPrice?e+(t.currentPrice-t.entryPrice):e:e+t.pnl,0),o=s>0?Number((n/s).toFixed(2)):0,i=0,d=0;t.length>0&&(i=Math.max(...t.map(e=>e.isHolding?e.currentPrice?e.currentPrice-e.entryPrice:0:e.pnl)),d=Math.min(...t.map(e=>e.isHolding?e.currentPrice?e.currentPrice-e.entryPrice:0:e.pnl))),c({username:e.username,tradesCount:s,winRate:Number(a),avgPnlPerTrade:o,totalPnL:n,bestTrade:i,worstTrade:d})}catch(e){console.error("Failed to fetch trade stats",e)}})():s.push("/login")},[e,t,s]),t)?(0,r.jsx)("div",{className:"flex items-center justify-center h-96 bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-700 font-medium",children:"Loading profile..."})]})}):e?(0,r.jsx)("div",{className:"max-w-7xl mx-auto my-8 px-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative bg-gradient-to-r from-slate-800 to-slate-700 px-8 py-10 text-white",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-24 w-24 rounded-full bg-gradient-to-r from-indigo-500 to-blue-600 text-white flex items-center justify-center text-3xl font-bold shadow-lg",children:e.username.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{className:"ml-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:e.username}),(0,r.jsx)("div",{className:"flex items-center mt-2"})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex flex-col items-center bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[(0,r.jsx)("span",{className:"text-sm text-slate-300 uppercase font-medium mb-1",children:"Total Trades"}),(0,r.jsx)("span",{className:"text-5xl font-bold",children:i.tradesCount}),(0,r.jsx)("div",{className:"w-24 h-1 bg-indigo-500 rounded-full mt-4"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 flex flex-col",children:[(0,r.jsx)("span",{className:"text-xs text-slate-300 uppercase font-medium",children:"Win Rate"}),(0,r.jsxs)("span",{className:"text-2xl font-bold mt-1",children:[i.winRate,"%"]}),(0,r.jsx)("div",{className:"w-full bg-slate-600/30 rounded-full h-2 mt-2",children:(0,r.jsx)("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"".concat(i.winRate,"%")}})})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("span",{className:"text-xs text-slate-300 uppercase font-medium",children:"Total P&L"}),(0,r.jsxs)("div",{className:"text-2xl font-bold mt-1 ".concat(i.totalPnL>=0?"text-emerald-400":"text-rose-400"),children:[i.totalPnL>=0?"+":"",i.totalPnL.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Performance Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-100",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 text-indigo-500",children:(0,r.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),"Trading Performance"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b border-slate-200 pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Average P&L per Trade"}),(0,r.jsxs)("p",{className:"text-lg font-semibold ".concat(i.avgPnlPerTrade>=0?"text-emerald-600":"text-rose-600"),children:[i.avgPnlPerTrade>=0?"+":"","$",i.avgPnlPerTrade.toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(i.avgPnlPerTrade>=0?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:i.avgPnlPerTrade>=0?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M12 19V5M5 12l7-7 7 7"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M12 5v14M5 12l7 7 7-7"})})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center border-b border-slate-200 pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Best Trade"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-emerald-600",children:["+$",i.bestTrade.toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Worst Trade"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-rose-600",children:["$",i.worstTrade.toFixed(2)]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]}),(0,r.jsxs)("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-100",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 text-indigo-500",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 6v6l4 2"})]}),"Account Activity"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b border-slate-200 pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Win Rate"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("p",{className:"text-lg font-semibold text-slate-800",children:[i.winRate,"%"]}),(0,r.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded-full bg-emerald-100 text-emerald-700 font-medium",children:i.winRate>=50?"Good":"Needs Improvement"})]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 font-medium",children:"Account Status"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-slate-800",children:"Active"}),(0,r.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700 font-medium",children:"Premium"})]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),(0,r.jsx)("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})})]})]})]})]})]})]})}):null}},35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},59576:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>i});var r=s(95155),a=s(12115),n=s(25731),o=s(35695);let l=(0,a.createContext)({user:null,login:async()=>{},register:async()=>{},logout:async()=>{},loading:!0}),i=e=>{let{children:t}=e,[s,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),h=(0,o.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("user");e&&i(JSON.parse(e)),d(!1)},[]);let x=async e=>{try{let t=await (0,n.iD)(e);i(t),h.push("/")}catch(e){throw e}},u=async e=>{try{let t=await (0,n.kz)(e);i(t),h.push("/")}catch(e){throw e}},m=async()=>{await (0,n.ri)(),i(null),h.push("/login")};return(0,r.jsx)(l.Provider,{value:{user:s,login:x,register:u,logout:m,loading:c},children:t})},c=()=>(0,a.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(27422)),_N_E=e.O()}]);