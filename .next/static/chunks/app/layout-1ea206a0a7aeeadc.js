(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{25731:(e,t,s)=>{"use strict";s.d(t,{$L:()=>x,Lp:()=>h,Tw:()=>c,Y5:()=>u,ZI:()=>d,iD:()=>a,kz:()=>n,ri:()=>l,s5:()=>f,tK:()=>m,yW:()=>i});let r="http://localhost:5141/api";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=JSON.parse(localStorage.getItem("user")||"{}");s.token?(console.log("Using token for request:",e),t.headers={...t.headers,Authorization:"Bearer ".concat(s.token)}):console.warn("No token found for request:",e);let r=await fetch(e,t);if(401===r.status)throw console.error("Unauthorized request:",e),localStorage.removeItem("user"),window.location.href="/login",Error("Unauthorized");return r}async function a(e){console.log("API login function called with:",e.username);try{let t=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Login response status:",t.status),!t.ok){let e=await t.text();throw console.error("Login error response:",e),Error(e||"Login failed")}let s=await t.json();return console.log("Login successful, user data:",s),localStorage.setItem("user",JSON.stringify(s)),console.log("User saved to localStorage"),s}catch(e){throw console.error("API login error:",e),e}}async function n(e){let t=await fetch("".concat(r,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Registration failed");let s=await t.json();return localStorage.setItem("user",JSON.stringify(s)),s}async function l(){localStorage.removeItem("user")}async function i(){let e=await o("".concat(r,"/stocks"));if(!e.ok)throw Error("Failed to fetch stocks");return e.json()}async function c(e){let t=await o("".concat(r,"/stocks/").concat(e));if(!t.ok)throw Error("Failed to fetch stock");return t.json()}async function d(){let e=await o("".concat(r,"/stocks/prices"));if(!e.ok)throw Error("Failed to fetch stock prices");return e.json()}async function h(e){let t=await o("".concat(r,"/stocks/").concat(e,"/history"));if(!t.ok)throw Error("Failed to fetch stock history");return t.json()}async function u(){let e=await o("".concat(r,"/trades"));if(!e.ok)throw Error("Failed to fetch trades");return e.json()}async function x(e){let t=await o("".concat(r,"/trades"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create trade");return t.json()}async function m(e,t){if(!(await o("".concat(r,"/trades/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pnl:t,isHolding:!1})})).ok)throw Error("Failed to sell trade")}async function f(e){if(!(await o("".concat(r,"/trades/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete trade")}},30347:()=>{},35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},59576:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>i});var r=s(95155),o=s(12115),a=s(25731),n=s(35695);let l=(0,o.createContext)({user:null,login:async()=>{},register:async()=>{},logout:async()=>{},loading:!0}),i=e=>{let{children:t}=e,[s,i]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0),h=(0,n.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("user");e&&i(JSON.parse(e)),d(!1)},[]);let u=async e=>{try{let t=await (0,a.iD)(e);i(t),h.push("/")}catch(e){throw e}},x=async e=>{try{let t=await (0,a.kz)(e);i(t),h.push("/")}catch(e){throw e}},m=async()=>{await (0,a.ri)(),i(null),h.push("/login")};return(0,r.jsx)(l.Provider,{value:{user:s,login:u,register:x,logout:m,loading:c},children:t})},c=()=>(0,o.useContext)(l)},72429:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,78346,23)),Promise.resolve().then(s.t.bind(s,30347,23)),Promise.resolve().then(s.bind(s,90024)),Promise.resolve().then(s.bind(s,59576))},78346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},90024:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var r=s(95155),o=s(59576),a=s(12115),n=s(6874),l=s.n(n),i=s(35695);let c=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"9"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"5"}),(0,r.jsx)("rect",{x:"14",y:"12",width:"7",height:"9"}),(0,r.jsx)("rect",{x:"3",y:"16",width:"7",height:"5"})]}),d=()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),h=()=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"})}),u=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),x=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),(0,r.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,r.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]});function m(){let{user:e,logout:t}=(0,o.A)(),s=(0,i.usePathname)(),[n,m]=(0,a.useState)(!0),f=async()=>{await t()},w=[{path:"/",label:"Dashboard",icon:(0,r.jsx)(c,{})},{path:"/stocks",label:"Markets",icon:(0,r.jsx)(d,{})},{path:"/trades",label:"My Trades",icon:(0,r.jsx)(h,{})},{path:"/profile",label:"Profile",icon:(0,r.jsx)(u,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>m(!n),className:"fixed md:hidden z-90 bottom-10 right-10 bg-slate-700 w-12 h-12 rounded-full drop-shadow-lg flex justify-center items-center text-white hover:bg-slate-800 transition-colors",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsx)("div",{className:"".concat(n?"translate-x-0":"-translate-x-full"," fixed top-0 left-0 h-screen w-72 bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-30 md:translate-x-0"),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 py-6 px-6",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"MONEYYY"}),(0,r.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:"A TRADING APP"})]}),e&&(0,r.jsx)("div",{className:"p-5 border-b border-slate-100",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-blue-600 text-white flex items-center justify-center text-lg font-bold shadow-sm",children:e.username.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-slate-800",children:e.username}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500 mr-2"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Active"})]})]})]})}),(0,r.jsxs)("nav",{className:"flex-grow py-6 px-3",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-4 mb-2",children:"Navigation"}),(0,r.jsx)("ul",{className:"space-y-1",children:w.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)(l(),{href:e.path,className:"flex items-center px-4 py-3 rounded-lg text-slate-600 hover:bg-slate-100 hover:text-slate-800 transition-colors ".concat(s===e.path?"bg-slate-100 text-slate-800 font-medium":""),children:[(0,r.jsx)("span",{className:"mr-3 ".concat(s===e.path?"text-indigo-600":"text-slate-500"),children:e.icon}),(0,r.jsx)("span",{children:e.label}),s===e.path&&(0,r.jsx)("span",{className:"ml-auto h-2 w-2 rounded-full bg-indigo-600"})]})},e.path))})]}),e&&(0,r.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,r.jsxs)("button",{onClick:f,className:"flex items-center w-full px-4 py-3 rounded-lg text-slate-600 hover:bg-rose-50 hover:text-rose-600 transition-colors",children:[(0,r.jsx)("span",{className:"mr-3 text-slate-500",children:(0,r.jsx)(x,{})}),(0,r.jsx)("span",{children:"Sign Out"})]})})]})})]})}function f(e){let{children:t}=e,{user:s,loading:a}=(0,o.A)();return a?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-slate-700 font-medium",children:"Loading your dashboard..."})]})}):s?(0,r.jsxs)("div",{className:"flex min-h-screen bg-slate-50",children:[(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"flex-1 ml-0 md:ml-72 p-6 transition-all duration-300 ease-in-out",children:t})]}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50",children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[838,874,441,684,358],()=>t(72429)),_N_E=e.O()}]);