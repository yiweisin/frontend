{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/yiweisin/GitHub/frontend/src/app/stocks/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport {\n  getStock,\n  getStockHistory,\n  getStockPrices,\n  createTrade,\n} from \"@/lib/api\";\nimport { Stock } from \"@/types/stock\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  ReferenceLine,\n} from \"recharts\";\n\nexport default function StockDetailPage() {\n  // CSS for animations\n  const animationStyles = `\n    @keyframes fade-in {\n      from { opacity: 0; transform: translate(-50%, -20px); }\n      to { opacity: 1; transform: translate(-50%, 0); }\n    }\n    .animate-fade-in {\n      animation: fade-in 0.3s ease-out forwards;\n    }\n  `;\n\n  const params = useParams();\n  const router = useRouter();\n  const stockId = Number(params.id);\n\n  const [stock, setStock] = useState<Stock | null>(null);\n  const [priceHistory, setPriceHistory] = useState<\n    { date: string; price: number }[]\n  >([]);\n  const [weeklyChange, setWeeklyChange] = useState<number | null>(null);\n  const [threeDayChange, setThreeDayChange] = useState<number | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshCounter, setRefreshCounter] = useState(0);\n  const [timeRange, setTimeRange] = useState<\"1W\" | \"1M\" | \"3M\" | \"1Y\" | \"ALL\">(\n    \"1M\"\n  );\n  const [showBuySuccess, setShowBuySuccess] = useState(false);\n  const [isPurchasing, setIsPurchasing] = useState(false);\n\n  // Initial data load\n  useEffect(() => {\n    const fetchStockData = async () => {\n      if (!stockId || isNaN(stockId)) {\n        setError(\"Invalid stock ID\");\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch stock details using existing getStock function\n        const stockData = await getStock(stockId);\n        setStock(stockData);\n\n        // Fetch price history\n        const history = await getStockHistory(stockId);\n        // Sort history in ascending order (oldest first)\n        const sortedHistory = history.sort(\n          (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\n        );\n        setPriceHistory(sortedHistory);\n\n        // Calculate percentage changes\n        calculatePercentageChanges(sortedHistory);\n      } catch (err) {\n        console.error(\"Failed to fetch stock data:\", err);\n        setError(\"Failed to load stock information\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStockData();\n\n    // Start auto-refresh timer - using same speed as StocksList (500ms)\n    const timer = setInterval(() => {\n      setRefreshCounter((prev) => prev + 1);\n    }, 500);\n\n    return () => clearInterval(timer);\n  }, [stockId]);\n\n  // Calculate percentage changes based on the price history\n  const calculatePercentageChanges = (\n    history: { date: string; price: number }[]\n  ) => {\n    if (!history || history.length < 4) {\n      // Need at least 4 data points for weekly change (assuming daily data)\n      setWeeklyChange(null);\n      setThreeDayChange(null);\n      return;\n    }\n\n    const currentPrice = history[history.length - 1].price;\n\n    // Calculate 3-day change\n    const threeDaysAgoIndex = Math.max(0, history.length - 4);\n    const threeDaysAgoPrice = history[threeDaysAgoIndex].price;\n    const threeDayChangePercent =\n      ((currentPrice - threeDaysAgoPrice) / threeDaysAgoPrice) * 100;\n    setThreeDayChange(threeDayChangePercent);\n\n    // Calculate weekly change (7 days)\n    const weekAgoIndex = Math.max(0, history.length - 8);\n    const weekAgoPrice = history[weekAgoIndex].price;\n    const weeklyChangePercent =\n      ((currentPrice - weekAgoPrice) / weekAgoPrice) * 100;\n    setWeeklyChange(weeklyChangePercent);\n  };\n\n  // Auto-refresh stock price\n  useEffect(() => {\n    if (refreshCounter > 0 && stock) {\n      const updatePrice = async () => {\n        try {\n          const stockPrices = await getStockPrices();\n          const updatedPrice = stockPrices.find((sp) => sp.id === stockId);\n\n          if (updatedPrice) {\n            setStock((prevStock) => {\n              if (!prevStock) return null;\n              return {\n                ...prevStock,\n                price: updatedPrice.price,\n              };\n            });\n\n            // Also update percentage changes when price updates\n            if (priceHistory.length > 0) {\n              const updatedHistory = [...priceHistory];\n              // Update the latest history point or add a new one\n              // This depends on your implementation, here we're just recalculating\n              calculatePercentageChanges(updatedHistory);\n            }\n          }\n        } catch (err) {\n          console.error(\"Failed to update price:\", err);\n        }\n      };\n\n      updatePrice();\n    }\n  }, [refreshCounter, stockId, stock, priceHistory]);\n\n  const handleBack = () => {\n    router.back();\n  };\n\n  const handleBuyStock = async () => {\n    setIsPurchasing(true);\n    try {\n      if (stock)\n        await createTrade({\n          stockId,\n          entryPrice: stock.price,\n          isHolding: true,\n        });\n      setIsPurchasing(false);\n      setShowBuySuccess(true);\n    } catch (err) {\n      setError(\"Failed to add trade\");\n      console.error(err);\n    }\n  };\n\n  const renderPercentageChange = (value: number | null) => {\n    if (value === null) return <span className=\"text-gray-400\">N/A</span>;\n\n    const isPositive = value >= 0;\n    const colorClass = isPositive ? \"text-emerald-600\" : \"text-rose-600\";\n    const sign = isPositive ? \"+\" : \"\";\n\n    return (\n      <span className={`font-semibold ${colorClass}`}>\n        {sign}\n        {value.toFixed(2)}%\n      </span>\n    );\n  };\n\n  const getFilteredChartData = () => {\n    if (priceHistory.length === 0) return [];\n\n    const now = new Date();\n    let cutoffDate = new Date();\n\n    switch (timeRange) {\n      case \"1W\":\n        cutoffDate.setDate(now.getDate() - 7);\n        break;\n      case \"1M\":\n        cutoffDate.setMonth(now.getMonth() - 1);\n        break;\n      case \"3M\":\n        cutoffDate.setMonth(now.getMonth() - 3);\n        break;\n      case \"1Y\":\n        cutoffDate.setFullYear(now.getFullYear() - 1);\n        break;\n      case \"ALL\":\n      default:\n        cutoffDate = new Date(0);\n    }\n\n    const allData = priceHistory.map((item) => {\n      const dateObj = new Date(item.date);\n      return {\n        fullDate: dateObj,\n        date: item.date,\n        price: item.price,\n      };\n    });\n\n    return allData\n      .filter((item) => item.fullDate >= cutoffDate)\n      .sort((a, b) => a.fullDate.getTime() - b.fullDate.getTime());\n  };\n\n  const filteredChartData = getFilteredChartData();\n\n  const minPrice =\n    filteredChartData.length > 0\n      ? Math.min(...filteredChartData.map((d) => d.price)) * 0.98\n      : 0;\n\n  const maxPrice =\n    filteredChartData.length > 0\n      ? Math.max(...filteredChartData.map((d) => d.price)) * 1.02\n      : 100;\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96 bg-slate-50\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-slate-700 font-medium\">\n            Loading stock information...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !stock) {\n    return (\n      <div className=\"max-w-7xl mx-auto my-8 px-6\">\n        <button\n          onClick={handleBack}\n          className=\"mb-4 px-5 py-2.5 bg-slate-700 text-white rounded-md hover:bg-slate-800 transition-colors font-medium flex items-center\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"mr-2\"\n          >\n            <path d=\"M19 12H5M12 19l-7-7 7-7\" />\n          </svg>\n          Back to Stocks\n        </button>\n        <div className=\"text-center py-8 px-4 bg-rose-50 text-rose-700 rounded-lg border border-rose-200\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"40\"\n            height=\"40\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"mx-auto mb-3 text-rose-500\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n          </svg>\n          <h3 className=\"text-lg font-semibold mb-2\">Error Loading Stock</h3>\n          <p>{error || \"Stock not found\"}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto my-8 px-6\">\n      {/* Inject animation styles */}\n      <style>{animationStyles}</style>\n\n      {/* Success Alert */}\n      {showBuySuccess && (\n        <div className=\"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-white shadow-xl rounded-lg border border-emerald-100 p-4 flex items-center max-w-md animate-fade-in\">\n          <div className=\"bg-emerald-100 rounded-full p-2 mr-4\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-6 w-6 text-emerald-600\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M5 13l4 4L19 7\"\n              />\n            </svg>\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-slate-800\">\n              Purchase Successful!\n            </h3>\n            <p className=\"text-sm text-slate-600\">\n              You've successfully purchased {stock.symbol} shares.\n            </p>\n          </div>\n          <button\n            onClick={() => setShowBuySuccess(false)}\n            className=\"ml-4 text-slate-400 hover:text-slate-600\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-5 w-5\"\n              viewBox=\"0 0 20 20\"\n              fill=\"currentColor\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        </div>\n      )}\n\n      <button\n        onClick={handleBack}\n        className=\"mb-6 px-5 py-2.5 bg-slate-700 text-white rounded-md hover:bg-slate-800 transition-colors font-medium flex items-center\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          className=\"mr-2\"\n        >\n          <path d=\"M19 12H5M12 19l-7-7 7-7\" />\n        </svg>\n        Back to Stocks\n      </button>\n\n      <div className=\"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden\">\n        {/* Header with company information and auto-refresh indicator */}\n        <div className=\"relative bg-gradient-to-r from-slate-800 to-slate-700 px-8 py-7 text-white\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <div className=\"flex items-center\">\n                <h1 className=\"text-3xl font-bold\">{stock.symbol}</h1>\n                <span className=\"mx-3 text-slate-400\">|</span>\n                <h2 className=\"text-2xl font-medium text-slate-100\">\n                  {stock.name}\n                </h2>\n              </div>\n              <div className=\"mt-5 flex items-baseline\">\n                <span className=\"text-4xl font-bold\">\n                  ${stock.price.toFixed(2)}\n                </span>\n\n                {/* Percentage Changes */}\n                <div className=\"ml-4 flex gap-4\">\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-xs text-slate-300 uppercase font-medium\">\n                      3D\n                    </span>\n                    <div className=\"text-base\">\n                      {renderPercentageChange(threeDayChange)}\n                    </div>\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-xs text-slate-300 uppercase font-medium\">\n                      7D\n                    </span>\n                    <div className=\"text-base\">\n                      {renderPercentageChange(weeklyChange)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* One-Click Buy Button */}\n              <button\n                onClick={handleBuyStock}\n                disabled={isPurchasing}\n                className=\"mt-4 px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg shadow-md transition-all flex items-center disabled:opacity-70 disabled:cursor-not-allowed\"\n              >\n                {isPurchasing ? (\n                  <>\n                    <svg\n                      className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      ></circle>\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      ></path>\n                    </svg>\n                    Processing...\n                  </>\n                ) : (\n                  <>\n                    <svg\n                      className=\"w-4 h-4 mr-2\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n                      ></path>\n                    </svg>\n                    Buy Now\n                  </>\n                )}\n              </button>\n            </div>\n\n            <div className=\"bg-slate-600/40 rounded-lg px-4 py-2 flex items-center\">\n              <div\n                className={`h-2 w-2 rounded-full mr-2 ${\n                  refreshCounter > 0\n                    ? \"bg-emerald-400 animate-pulse\"\n                    : \"bg-slate-400\"\n                }`}\n              ></div>\n              <span className=\"text-sm font-medium text-slate-200\">\n                {refreshCounter > 0 ? \"Live Updates\" : \"Connecting...\"}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Chart Section */}\n        <div className=\"px-8 py-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-xl font-semibold text-slate-800\">\n              Price History\n            </h3>\n            <div className=\"flex bg-slate-100 rounded-lg overflow-hidden\">\n              {[\"1W\", \"1M\", \"3M\", \"1Y\", \"ALL\"].map((range) => (\n                <button\n                  key={range}\n                  onClick={() => setTimeRange(range as any)}\n                  className={`px-4 py-1.5 text-sm font-medium ${\n                    timeRange === range\n                      ? \"bg-slate-700 text-white\"\n                      : \"text-slate-700 hover:bg-slate-200\"\n                  }`}\n                >\n                  {range}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {filteredChartData.length > 0 ? (\n            <div className=\"h-80 w-full\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <LineChart\n                  data={filteredChartData}\n                  margin={{\n                    top: 5,\n                    right: 30,\n                    left: 20,\n                    bottom: 30,\n                  }}\n                >\n                  <defs>\n                    <linearGradient id=\"colorPrice\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                      <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.2} />\n                      <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\n                    </linearGradient>\n                  </defs>\n                  <CartesianGrid\n                    strokeDasharray=\"3 3\"\n                    stroke=\"#e5e7eb\"\n                    vertical={false}\n                  />\n                  <XAxis\n                    dataKey=\"date\"\n                    tick={{ fill: \"#475569\" }}\n                    angle={-45}\n                    textAnchor=\"end\"\n                    height={60}\n                    tickFormatter={(value) => {\n                      const date = new Date(value);\n                      if (timeRange === \"1W\" || timeRange === \"1M\") {\n                        return date.toLocaleDateString(\"en-US\", {\n                          month: \"short\",\n                          day: \"numeric\",\n                        });\n                      } else {\n                        return date.toLocaleDateString(\"en-US\", {\n                          month: \"short\",\n                          year: \"2-digit\",\n                        });\n                      }\n                    }}\n                  />\n                  <YAxis\n                    tick={{ fill: \"#475569\" }}\n                    domain={[minPrice, maxPrice]}\n                    tickFormatter={(value) => `$${value.toFixed(2)}`}\n                  />\n                  <Tooltip\n                    formatter={(value) => {\n                      if (typeof value === \"number\") {\n                        return [`$${value.toFixed(2)}`, \"Price\"];\n                      }\n                      return [`${value}`, \"Price\"];\n                    }}\n                    labelFormatter={(label) => {\n                      const date = new Date(label);\n                      return date.toLocaleDateString(\"en-US\", {\n                        weekday: \"short\",\n                        year: \"numeric\",\n                        month: \"short\",\n                        day: \"numeric\",\n                      });\n                    }}\n                    contentStyle={{\n                      backgroundColor: \"#ffffff\",\n                      borderColor: \"#e2e8f0\",\n                      borderRadius: \"6px\",\n                      boxShadow:\n                        \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\",\n                      padding: \"12px\",\n                    }}\n                  />\n                  <ReferenceLine\n                    y={stock.price}\n                    stroke=\"#6366f1\"\n                    strokeDasharray=\"3 3\"\n                  />\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"price\"\n                    stroke=\"#10b981\"\n                    strokeWidth={3}\n                    dot={false}\n                    activeDot={{\n                      r: 6,\n                      fill: \"#047857\",\n                      stroke: \"#ffffff\",\n                      strokeWidth: 2,\n                    }}\n                    fillOpacity={1}\n                    fill=\"url(#colorPrice)\"\n                  />\n                </LineChart>\n              </ResponsiveContainer>\n            </div>\n          ) : (\n            <div className=\"h-80 w-full flex items-center justify-center bg-slate-50 rounded-lg border border-slate-100\">\n              <p className=\"text-slate-500 font-medium\">\n                No price history available for the selected time range.\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Company Description and Additional Info */}\n        <div className=\"px-8 py-6 bg-slate-50 border-t border-slate-100\">\n          <h3 className=\"text-xl font-semibold text-slate-800 mb-4\">\n            About {stock.name}\n          </h3>\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-100\">\n            <p className=\"text-slate-700 leading-relaxed\">\n              {stock.description ||\n                \"No description available for this company.\"}\n            </p>\n\n            {/* Additional company details could go here */}\n            <div className=\"grid grid-cols-2 gap-6 mt-8\">\n              <div className=\"border-l-4 border-indigo-500 pl-4\">\n                <p className=\"text-xs text-slate-500 uppercase font-medium\">\n                  Sector\n                </p>\n                <p className=\"text-slate-800 font-medium\">Technology</p>\n              </div>\n              <div className=\"border-l-4 border-emerald-500 pl-4\">\n                <p className=\"text-xs text-slate-500 uppercase font-medium\">\n                  Exchange\n                </p>\n                <p className=\"text-slate-800 font-medium\">NASDAQ</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}